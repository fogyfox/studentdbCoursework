<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∞–¥–º–∏–Ω–∫–∏ –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏ —Ñ–æ—Ä–º */
        .form-row {
            display: flex;
            gap: 10px;
            align-items: flex-end;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        .form-row input, .form-row select {
            margin-bottom: 0; /* –£–±–∏—Ä–∞–µ–º –æ—Ç—Å—Ç—É–ø, —Ç–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º flex-gap */
            flex: 1;
            min-width: 150px;
        }
        .form-row button {
            height: 42px; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –≤—ã—Å–æ—Ç—ã —Å –∏–Ω–ø—É—Ç–∞–º–∏ */
            white-space: nowrap;
        }
        .section-title {
            margin-top: 30px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
    </style>
</head>
<body>

<div class="container">
    <!-- –®–∞–ø–∫–∞ -->
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <h2>‚öôÔ∏è –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
        <button onclick="sessionStorage.clear(); location.href='/';" class="danger" style="padding: 6px 12px;">–í—ã–π—Ç–∏</button>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è (–¢–∞–±—ã) -->
    <div class="tabs-nav">
        <button class="tab-button active" data-tab="users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
        <button class="tab-button" data-tab="students">–°—Ç—É–¥–µ–Ω—Ç—ã</button>
        <button class="tab-button" data-tab="teachers">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</button>
        <button class="tab-button" data-tab="groups">–ì—Ä—É–ø–ø—ã</button>
        <button class="tab-button" data-tab="courses">–ü—Ä–µ–¥–º–µ—Ç—ã</button>
    </div>

    <!-- ========================= -->
    <!-- –í–∫–ª–∞–¥–∫–∞: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
    <!-- ========================= -->
    <div id="users" class="tab active">
        <div class="card">
            <h3>–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
            <div class="table-responsive">
                <table>
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>–§–ò–û</th>
                        <th>–õ–æ–≥–∏–Ω</th>
                        <th>–†–æ–ª—å</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                    </thead>
                    <tbody id="usersTable"></tbody>
                </table>
            </div>

            <h4 class="section-title">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h4>
            <div class="form-row">
                <input id="newUserFirstName" placeholder="–ò–º—è">
                <input id="newUserLastName" placeholder="–§–∞–º–∏–ª–∏—è">
                <input id="newUserLogin" placeholder="–õ–æ–≥–∏–Ω">
                <input id="newUserPassword" type="password" placeholder="–ü–∞—Ä–æ–ª—å">
                <select id="newUserRole">
                    <option value="TEACHER">TEACHER</option>
                    <option value="ADMIN">ADMIN</option>
                    <!-- –†–æ–ª—å STUDENT —Å–∫—Ä—ã—Ç–∞, —Å–æ–∑–¥–∞–µ–º —á–µ—Ä–µ–∑ –≤–∫–ª–∞–¥–∫—É –°—Ç—É–¥–µ–Ω—Ç—ã -->
                </select>
                <button id="addUserBtn">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- ========================= -->
    <!-- –í–∫–ª–∞–¥–∫–∞: –°—Ç—É–¥–µ–Ω—Ç—ã -->
    <!-- ========================= -->
    <div id="students" class="tab">
        <div class="card">
            <h3>–°—Ç—É–¥–µ–Ω—Ç—ã</h3>
            <div class="table-responsive">
                <table>
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>–ò–º—è</th>
                        <th>–§–∞–º–∏–ª–∏—è</th>
                        <th>–õ–æ–≥–∏–Ω</th>
                        <th>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</th>
                        <th>–ì—Ä—É–ø–ø–∞</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                    </thead>
                    <tbody id="studentsTable"></tbody>
                </table>
            </div>

            <h4 class="section-title">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞</h4>
            <div class="form-row">
                <input id="newStudentFirstName" placeholder="–ò–º—è">
                <input id="newStudentLastName" placeholder="–§–∞–º–∏–ª–∏—è">
                <input id="newStudentDob" type="date" title="–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è">
                <input id="newStudentGroup" placeholder="ID –≥—Ä—É–ø–ø—ã">
                <input id="newStudentLogin" placeholder="–õ–æ–≥–∏–Ω">
                <input id="newStudentPassword" type="password" placeholder="–ü–∞—Ä–æ–ª—å">
                <button id="addStudentBtn">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- ========================= -->
    <!-- –í–∫–ª–∞–¥–∫–∞: –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ -->
    <!-- ========================= -->
    <div id="teachers" class="tab">
        <!-- –ë–ª–æ–∫ 1: –°–ø–∏—Å–æ–∫ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ -->
        <div class="card">
            <h3>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</h3>
            <div class="table-responsive">
                <table>
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>–ò–º—è</th>
                        <th>–§–∞–º–∏–ª–∏—è</th>
                        <th>–õ–æ–≥–∏–Ω</th>
                        <th>–ö—É—Ä–∏—Ä—É–µ—Ç –≥—Ä—É–ø–ø—ã</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                    </thead>
                    <tbody id="teachersListTable"></tbody>
                </table>
            </div>

            <h4 class="section-title">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</h4>
            <div class="form-row">
                <input id="newTeacherFirstName" placeholder="–ò–º—è">
                <input id="newTeacherLastName" placeholder="–§–∞–º–∏–ª–∏—è">
                <input id="newTeacherLogin" placeholder="–õ–æ–≥–∏–Ω">
                <input id="newTeacherPassword" type="password" placeholder="–ü–∞—Ä–æ–ª—å">
                <button id="addTeacherBtn">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </div>

        <!-- –ë–ª–æ–∫ 2: –ù–∞–≥—Ä—É–∑–∫–∞ -->
        <div class="card" style="border-top: 4px solid var(--warning);">
            <h3>üìÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–æ–π (–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ)</h3>
            <div class="form-row" style="background: #fff8e1; padding: 15px; border-radius: 6px; border: 1px solid #ffe0b2;">
                <div style="flex:1">
                    <label style="font-size:0.8em; color:#666">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å:</label>
                    <select id="loadTeacherSelect" style="margin-bottom:0"></select>
                </div>
                <div style="flex:1">
                    <label style="font-size:0.8em; color:#666">–ü—Ä–µ–¥–º–µ—Ç:</label>
                    <select id="loadCourseSelect" style="margin-bottom:0"></select>
                </div>
                <div style="flex:1">
                    <label style="font-size:0.8em; color:#666">–ì—Ä—É–ø–ø–∞:</label>
                    <select id="loadGroupSelect" style="margin-bottom:0"></select>
                </div>
                <button onclick="assignTeacherLoad()" style="background-color: var(--success);">–ù–∞–∑–Ω–∞—á–∏—Ç—å</button>
            </div>

            <h4 style="margin-top: 20px; color: var(--text-muted);">–¢–µ–∫—É—â–µ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:</h4>
            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</th>
                            <th>–ü—Ä–µ–¥–º–µ—Ç</th>
                            <th>–ì—Ä—É–ø–ø–∞</th>
                            <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                        </tr>
                    </thead>
                    <tbody id="teachersLoadList"></tbody> <!-- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π ID -->
                </table>
            </div>
        </div>
    </div>

    <!-- ========================= -->
    <!-- –í–∫–ª–∞–¥–∫–∞: –ì—Ä—É–ø–ø—ã -->
    <!-- ========================= -->
    <div id="groups" class="tab">
        <div class="card">
            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏</h3>
            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th>–°—Ç—É–¥–µ–Ω—Ç–æ–≤</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="groupsListTable"></tbody>
                </table>
            </div>

            <h4 class="section-title">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É</h4>
            <div class="form-row">
                <input id="newGroupName" type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä. –ü–û–í–¢-21)" style="max-width: 400px;">
                <button id="addGroupBtn">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- ========================= -->
    <!-- –í–∫–ª–∞–¥–∫–∞: –ü—Ä–µ–¥–º–µ—Ç—ã -->
    <!-- ========================= -->
    <div id="courses" class="tab">
        <div class="card">
            <h3>–ü—Ä–µ–¥–º–µ—Ç—ã</h3>
            <div class="table-responsive">
                <table>
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                    </thead>
                    <tbody id="coursesTable"></tbody>
                </table>
            </div>

            <h4 class="section-title">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç</h4>
            <div class="form-row">
                <input id="newSubjectName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞" style="max-width: 400px;">
                <button id="addCourseBtn">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </div>
    </div>

</div>

<script src="js/api.js"></script>
<script src="js/admin.js"></script>
<script>
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
    const role = sessionStorage.getItem("role");
    if (role !== "ADMIN") {
        alert("–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω");
        location.href = "index.html";
    }

    // –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
    document.querySelectorAll(".tab-button").forEach(btn => {
        btn.addEventListener("click", () => {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –∏ —Ç–∞–±–æ–≤
            document.querySelectorAll(".tab-button").forEach(b => b.classList.remove("active"));
            document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));

            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞–∂–∞—Ç–æ–º—É
            btn.classList.add("active");
            document.getElementById(btn.dataset.tab).classList.add("active");

            // –í—ã–∑—ã–≤–∞–µ–º —Ä–µ–Ω–¥–µ—Ä —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –≤–∫–ª–∞–¥–∫–∏
            if (btn.dataset.tab === "users") renderUsers();
            if (btn.dataset.tab === "students") renderStudents();
            if (btn.dataset.tab === "teachers") renderTeachers();
            if (btn.dataset.tab === "courses") renderCourses();
            if (btn.dataset.tab === "groups") renderGroups();
        });
    });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (–æ—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
    renderUsers();
</script>
</body>
</html>
